{
    "variables": {
        "version":        "1.0.0",
        "aws_access_key": "",
        "aws_secret_key": "",
        "aws_region":     "us-east-1"
    },

    "builders": [
        {
        "type":               "amazon-ebs",
        "access_key":         "{{user `aws_access_key`}}",
        "secret_key":         "{{user `aws_secret_key`}}",
        "region":             "{{user `aws_region`}}",

        "vpc_id":             "vpc-0b0d041c2ddcd375c",
        "subnet_id":          "subnet-05f1ba2738c71d8f1",
        "security_group_ids": "sg-017f33ce34f3f8d3e",
        "source_ami":         "ami-013da1cc4ae87618c",
        "instance_type":      "t2.micro",

        "ssh_username":       "ubuntu",

        "ami_name":           "packer-ubuntu18.04-{{user `version`}}",
        "ami_description":    "Ubuntu 18.04 image generated by packer template",

        "tags": {
            "Name":      "packer-ubuntu18.04-{{user `version`}}",
            "version":   "{{user `version`}}",
            "osfamily":  "ubuntu",
            "osversion": "18.04"
        }
    }
  ],

    "provisioners": [
        {
            "type": "shell",
            "inline": [
                "sleep 30",
                "sudo apt-get update",
                "sudo apt-get upgrade -y",
                "sudo apt-get install apache2 -y",
                "sudo systemctl enable apache2"
            ]
        }
    ]
}
